# pnpm 캐시 실험 결과

## 1. 실험 환경

- OS: macOS 23.3.0
- pnpm 버전: v10
- 테스트 패키지: react@18.3.1, lodash@4.17.21
- 캐시 위치: /Users/seholee/Library/pnpm/store/v10

## 2. 실험 결과 분석

### 2.1 설치 시간 비교

1. **초기 설치**

   - 총 소요 시간: 3.002초
   - 사용자 CPU 시간: 1.395초
   - 시스템 CPU 시간: 0.784초
   - 특징: 4개 패키지 설치 (+react, +lodash 및 관련 의존성)

2. **캐시 사용 재설치**

   - 총 소요 시간: 1.706초 (초기 설치 대비 43% 감소)
   - 사용자 CPU 시간: 1.333초
   - 시스템 CPU 시간: 0.756초
   - 특징: 다운로드 없이 캐시된 패키지 재사용

3. **캐시 삭제 후 설치**
   - 총 소요 시간: 0.775초
   - 사용자 CPU 시간: 0.645초
   - 시스템 CPU 시간: 0.078초
   - 특징: lockfile이 존재하여 빠른 설치 가능

### 2.2 디스크 사용량

1. **node_modules 크기**

   - 총 크기: 5.2MB
   - 효율적인 하드링크 사용으로 작은 크기 유지

2. **캐시 상태**
   - 캐시 정리 전: "Packages in the store are untouched"
   - 캐시 정리 결과:
     - 3,582개 파일 제거
     - 3개 패키지 제거
     - 모든 메타데이터 캐시 파일 제거

## 3. 주요 발견 사항

1. **설치 속도 향상**

   - 캐시 사용 시 설치 시간 43% 감소
   - lockfile 존재 시 해결 단계 생략으로 추가 성능 향상

2. **효율적인 디스크 공간 사용**

   - 하드링크 사용으로 실제 디스크 사용량 최소화
   - node_modules 크기가 5.2MB로 매우 효율적

3. **캐시 시스템 효과**
   - Content-addressable 스토어로 패키지 중복 방지
   - 메타데이터 캐시로 빠른 의존성 해결
   - 네트워크 요청 최소화

## 4. 결론

1. **성능 이점**

   - 캐시 사용으로 설치 시간 대폭 감소
   - 하드링크 사용으로 디스크 공간 절약
   - 효율적인 패키지 재사용

2. **운영 효율성**

   - 안정적인 패키지 관리
   - 효과적인 캐시 정리 메커니즘
   - CI/CD 환경에 적합한 성능

3. **권장 사항**
   - 정기적인 캐시 정리 (pnpm store prune)
   - lockfile 유지로 일관된 설치 보장
   - CI/CD에서 캐시 활용 전략 수립
